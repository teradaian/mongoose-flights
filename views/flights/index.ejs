<!DOCTYPE html>
<html lang="en">
<%- include('../partials/header') %>
  <table>
    <thead>
      <tr>
        <th>Airline</th>
        <th>Airport</th>
        <th>Flight No.</th>
        <th>Departure Date</th>
      </tr>
    </thead>
    <tbody>
        <% let flightsByDeparture = flights.sort((a, b) => a.departs - b.departs) %>
        <% flightsByDeparture.forEach(flight => { %>
        <tr>
          <td><%= flight.airline %></td>
          <td><%= flight.airport %></td>
          <td><%= flight.flightNo %></td>
          <% let formatting = { hour: '2-digit', minute: '2-digit', weekday: 'long', year: 'numeric', month: 'short', day: 'numeric' } %>
          <% let date = flight.departs.toLocaleString("en-US", formatting) %>
          <% let curTime = new Date() %>
          <td class="<%= flight.departs < curTime ? 'departed' : '' %>"><%= date %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</body>
</html>